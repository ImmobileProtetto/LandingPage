/* faq13.css
 * Basato su faq9.css con correzioni per il layout mobile. Le modifiche
 * principali sono:
 *  – Aggiunta della classe `.mobile-veil` per mascherare lo spazio sopra
 *    la topbar sticky su dispositivi mobili, impedendo che il contenuto
 *    scorra dietro la topbar (problema segnalato nello screenshot 1).
 *  – Restyling della topbar FAQ nella versione mobile con le stesse
 *    dimensioni del prototipo faq8 (logo 56×56px e titolo più grande) e
 *    inversione dell’ordine degli elementi affinché il logo compaia a
 *    sinistra del testo.
 *  – Miglioramento del comportamento di push‑up quando si clicca “Leggi
 *    altre FAQ”: la topbar originale viene completamente rimossa quando
 *    il pulsante occupa il suo posto (evita la striscia residua indicata
 *    nello screenshot 2).
 */

:root{
  --bg: #f6f8fb;
  --card: #ffffff;

  --text: #0b1f3a;
  --muted: #4b5f78;
  --line: rgba(11, 31, 58, 0.12);
  --shadow: 0 10px 30px rgba(11, 31, 58, 0.08);

  --primary: #0f766e;
  --primary-dark: #064e3b;
  --primary-soft: rgba(15,118,110,0.12);

  --r: 16px;
  --max: 1120px;

  --rail: 128px; /* NON cambiare larghezza mini-box */

  --stickyTop: 12px; /* offset top sticky mobile */
}

*{ box-sizing:border-box; }

/* La veil è invisibile di default, verrà abilitata da media query */
.mobile-veil{ display:none; }

html{ scroll-behavior:smooth; }
body{
  margin:0;
  font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  font-weight: 400;
  background: var(--bg);
  color: var(--text);
}

a{ color: inherit; }

/* ===== Testi ===== */
h2{
  margin: 0 0 12px;
  font-size: clamp(26px, 3vw, 40px);
  font-weight: 600;
}

.question{
  font-size: clamp(18px, 2.0vw, 22px);
  line-height: 1.55;
  margin: 0 0 12px;
  font-weight: 600;
  color: var(--text);
}

.muted{
  color: var(--muted);
  font-size: 15px;
  line-height: 1.75;
  margin: 0;
}
.justify{ text-align: justify; text-justify: inter-word; }

/* ===== Layout ===== */
.page{ padding: clamp(22px, 4.5vw, 44px) 16px; }

.faq{
  width: min(var(--max), 100%);
  margin: 0 auto;
}

.faq__shell{
  display:grid;
  grid-template-columns: 1fr;
  gap: 14px;
  align-items:start;
}
@media (min-width: 980px){
  .faq__shell{
    grid-template-columns: var(--rail) 1fr;
    gap: 18px;
  }
}

/* ===== Rail sinistra ===== */
.rail{ position: relative; }
@media (min-width: 980px){
  .rail{ position: sticky; top: 22px; }
}

.rail__inner{
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: var(--r);
  box-shadow: var(--shadow);
  padding: 10px 8px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap: 8px;
}

/* il titolo deve stare nel rail, senza la margin-bottom di h2 */
.rail__title{
  margin: 0;
  text-align:center;
}

.rail__logo{
  width: 96px;
  height: 96px;
  display:grid;
  place-items:center;
}
.rail__img{
  width: 96px;
  height: 96px;
  object-fit: contain;
  display:block;
  user-select: none;
  -webkit-user-select: none;
  -webkit-user-drag: none;
  pointer-events: none;
}

/* ===== Stack ===== */
.stack{
  display:flex;
  flex-direction:column;
  gap: 10px;
}

/* ===== Item ===== */
.item{
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: 16px;
  box-shadow: var(--shadow);
  overflow:hidden;
}
.item--sub{ box-shadow: var(--shadow); }

/* ===== Summary ===== */
.q{
  list-style:none;
  cursor:pointer;
  padding: 14px 16px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;

  user-select:none;
}
.q::-webkit-details-marker{ display:none; }

/* dentro summary, la question NON deve avere il margin-bottom del blocco testuale */
.q .question{ margin:0; }

/* q__text serve SOLO per il bottone "Leggi altre FAQ" */
.q__text{
  font-size: clamp(18px, 2.0vw, 22px);
  line-height: 1.55;
  font-weight: 600;
  color: var(--text);
}

/* ===== Icona ===== */
.q__icon{
  flex: 0 0 auto;
  width: 28px;
  height: 28px;
  border-radius: 999px;
  border: 1px solid var(--line);
  display:grid;
  place-items:center;
  color: var(--muted);
  transition: transform .18s ease, background-color .18s ease, border-color .18s ease, color .18s ease;
  position:relative;
}
.q__icon::before{
  content:"";
  width: 8px;
  height: 8px;
  border-right: 2px solid currentColor;
  border-bottom: 2px solid currentColor;
  transform: rotate(45deg);
  opacity: .95;
}

.item:hover .q__icon{
  background: var(--primary-soft);
  border-color: rgba(15,118,110,0.22);
  color: var(--primary-dark);
}
.item[open] .q__icon{
  transform: rotate(180deg);
  background: var(--primary-soft);
  border-color: rgba(15,118,110,0.22);
  color: var(--primary-dark);
}

/* SOLO DESKTOP: geometria come faq4 (38px, raggio 12, freccia 10px) */
@media (min-width: 980px){
  .q__icon{
    width: 38px;
    height: 38px;
    border-radius: 12px;
    background: rgba(11,31,58,0.03);
  }
  .q__icon::before{
    width: 10px;
    height: 10px;
  }
}

/* ===== Risposta ===== */
.a{ overflow:hidden; } /* necessario per animazione height (JS) */
.a__inner{
  padding: 0 16px 14px;
}
.a__inner p{ margin:0; }

/* ===== Progressive disclosure ===== */
.more{ margin-top: 6px; }

.more__btn{
  width: 100%;
  background: var(--card);
  border: 1px solid rgba(15,118,110,0.22);
  border-radius: 16px;
  box-shadow: var(--shadow);
  padding: 14px 16px;

  cursor: pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  gap: 12px;

  transition: transform .16s ease, box-shadow .16s ease, border-color .16s ease;
  position: relative;
}

.more__btn:hover{
  transform: translateY(-2px);
  box-shadow: 0 18px 44px rgba(11,31,58,0.10);
  border-color: rgba(15,118,110,0.32);
}
.more__btn:active{ transform: translateY(-1px); }

.more__btn .q__text{ text-align:center; }

/* icona a destra (q__icon) per il bottone "Leggi altre FAQ" */
.more__btn .q__icon{
  position: absolute;
  right: 16px;
}
.more__btn:hover .q__icon{
  background: var(--primary-soft);
  border-color: rgba(15,118,110,0.22);
  color: var(--primary-dark);
}
.more__btn[aria-expanded="true"] .q__icon{
  transform: rotate(180deg);
  background: var(--primary-soft);
  border-color: rgba(15,118,110,0.22);
  color: var(--primary-dark);
}

/* reveal panel */
.more__panel{
  margin-top: 10px;
  display:grid;
  grid-template-rows: 0fr;
  transition: grid-template-rows .2s ease, opacity .2s ease;
  opacity: 0;
}
.more__panel.is-open{
  grid-template-rows: 1fr;
  opacity: 1;
}
.more__inner{
  overflow:hidden;
  display:flex;
  flex-direction:column;
  gap: 10px;
}

/* Focus */
:focus-visible{
  outline: none;
  box-shadow: 0 0 0 4px rgba(15,118,110,0.18);
  border-radius: 12px;
}

/* ===== Mobile-specific adjustments ===== */
@media (max-width: 979px){
  /* veil fissa: copre l’area superiore della viewport */
  .mobile-veil{
    display:block;
    position: fixed;
    top: 0; left: 0; right: 0;
    height: var(--veilH, var(--stickyTop));
    background: var(--bg);
    z-index: 58; /* sotto la topbar (60) ma sopra il resto */
    pointer-events: none;
  }

  /* la topbar FAQ diventa sticky e ha colore di sfondo fisso */
  .rail{
    position: sticky;
    top: var(--stickyTop);
    z-index: 60;
    background: var(--bg);
    will-change: transform;
  }

  /* mini-box (FAQ) dimensioni e ordine come faq8: logo a sinistra, titolo a destra */
  .rail__inner{
    flex-direction: row-reverse; /* inversione dell’ordine per mettere il logo a sinistra */
    justify-content: center;
    gap: 14px;
    padding: 12px 12px;
  }
  .rail__title{
    font-size: clamp(22px, 4vw, 28px);
    font-weight: 600;
    line-height: 1.05;
    letter-spacing: -0.02em;
  }
  .rail__logo, .rail__img{
    width: 56px;
    height: 56px;
  }

  /* quando "Leggi altre FAQ" è aperto, il bottone diventa sticky in cima */
  .more__btn[aria-expanded="true"]{
    position: sticky;
    top: var(--stickyTop);
    z-index: 65;
  }

  /* swap completo: nasconde la topbar FAQ quando il bottone l’ha spinta via */
  .faq.is-swapped .rail{
    opacity: 0;
    pointer-events: none;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  html{ scroll-behavior:auto; }
  .q__icon, .more__btn{ transition:none; }
  .more__panel{ transition:none; }
}

/* Sezione vuota di test sotto le FAQ (altezza impostata da JS) */
.after{ width: 100%; }