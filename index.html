<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Immobile Protetto • Valorizza e proteggi il tuo immobile inutilizzato</title>
  <meta name="description" content="Hai un immobile inutilizzato? Registralo gratuitamente su Immobile Protetto: selezione inquilini (dipendenti pubblici), gestione e tutela con assicurazione gratuita." />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="home.css" />
</head>

<body>
  <!-- TOP BAR -->
  <header class="topbar">
    <div class="wrap topbar-inner">
      <a class="brand" href="#home" aria-label="Immobile Protetto - Home">
        <span class="brand-mark" aria-hidden="true"></span>
        <span class="brand-text">
          <span class="brand-name">Immobile Protetto</span>
          <span class="brand-sub">Provincia di Pescara • Abruzzo</span>
        </span>
      </a>

      <nav class="nav">
        <a href="#cose">Che cos’è</a>
        <a href="#cosa">Cosa facciamo</a>
        <a href="#perche">Perché registrare</a>
        <button class="btn btn-small" type="button" data-open-modal="registerModal">Registra</button>
      </nav>

      <button class="burger" type="button" aria-label="Apri menu" aria-expanded="false" aria-controls="mobileNav">
        <span></span><span></span>
      </button>
    </div>

    <!-- Mobile nav -->
    <div id="mobileNav" class="mobile-nav" hidden>
      <a href="#cose">Che cos’è</a>
      <a href="#cosa">Cosa facciamo</a>
      <a href="#perche">Perché registrare</a>
      <button class="btn btn-full" type="button" data-open-modal="registerModal">Registra qui il tuo immobile</button>
    </div>
  </header>

  <main class="snap">
    <!-- PRIMO BLOCCO -->
    <section id="home" class="panel hero">
      <video
        id="bgVideo"
        class="hero-video"
        autoplay
        muted
        loop
        playsinline
        preload="metadata"
        poster="assets/hero-poster.jpg"
        aria-hidden="true"
      >
        <source src="assets/hero.mp4" type="video/mp4" />
      </video>

      <div class="hero-overlay" aria-hidden="true"></div>

      <div class="wrap hero-content">
        <p class="pill">Per proprietari con immobili inutilizzati</p>

        <h1>Hai un immobile inutilizzato?</h1>

        <p class="lead">
          Registralo gratuitamente su <strong>Immobile Protetto</strong> per valorizzarlo.
          Per te un servizio di <strong>tutela</strong> e un’<strong>assicurazione gratuita</strong>.
        </p>

        <div class="actions">
          <button class="btn" type="button" data-open-modal="registerModal">Registra qui il tuo immobile</button>
          <a class="btn btn-ghost" href="#cose">Scopri come funziona</a>
        </div>

        <p class="micro">
          Valutazione iniziale gratuita. Ti diciamo subito se l’immobile è idoneo.
        </p>
      </div>

      <a class="scroll-hint" href="#cose" aria-label="Scorri alla sezione successiva">
        <span>Scorri</span>
        <i aria-hidden="true"></i>
      </a>
    </section>

    <!-- SECONDO BLOCCO -->
    <section id="cose" class="panel">
      <div class="wrap content">
        <h2>Che cos’è Immobile Protetto?</h2>

        <p class="question">
          È la piattaforma che seleziona gli inquilini sulla base delle tue preferenze.
        </p>

        <p class="muted">
          Non devi pensare a spese di custodia, di gestione e di manutenzione:
          ti aiutiamo a tenere l’immobile <strong>curato</strong> e <strong>protetto</strong>, senza stress.
        </p>

        <div class="mini-points">
          <div class="mini-point">
            <div class="dot" aria-hidden="true"></div>
            <div>
              <div class="mini-title">Inquilini selezionati</div>
              <div class="mini-text">Preferenza a dipendenti pubblici fuori sede</div>
            </div>
          </div>

          <div class="mini-point">
            <div class="dot" aria-hidden="true"></div>
            <div>
              <div class="mini-title">Regole chiare</div>
              <div class="mini-text">Processo trasparente e documenti standardizzati</div>
            </div>
          </div>

          <div class="mini-point">
            <div class="dot" aria-hidden="true"></div>
            <div>
              <div class="mini-title">Zero pensieri</div>
              <div class="mini-text">Assistenza operativa durante la permanenza</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- TERZO BLOCCO -->
    <section id="cosa" class="panel panel-soft">
      <div class="wrap content">
        <h2>Cosa facciamo?</h2>

        <p class="question">
          Mettiamo in sicurezza il tuo immobile e ci occupiamo della gestione.
        </p>

        <p class="muted">
          Gestione completa, selezione inquilini e burocrazia <strong>a costo zero</strong>.
          In più, ti forniamo un’<strong>assicurazione gratuita</strong> per mettere al sicuro il tuo immobile.
        </p>

        <div class="steps">
          <div class="step">
            <div class="step-n">1</div>
            <h3>Valutazione rapida</h3>
            <p>Raccogliamo i dettagli e capiamo subito se è idoneo.</p>
          </div>

          <div class="step">
            <div class="step-n">2</div>
            <h3>Tutela e regole</h3>
            <p>Impostiamo un processo chiaro di gestione, assistenza e controllo.</p>
          </div>

          <div class="step">
            <div class="step-n">3</div>
            <h3>Selezione e avvio</h3>
            <p>Selezioniamo l’inquilino in base alle preferenze e avviamo il rapporto.</p>
          </div>
        </div>

        <div class="center-cta">
          <button class="btn" type="button" data-open-modal="registerModal">Registra il tuo immobile</button>
        </div>
      </div>
    </section>

    <!-- QUARTO BLOCCO -->
    <section id="perche" class="panel">
      <div class="wrap content">
        <h2>Perché dovresti registrare il tuo immobile?</h2>

        <div class="cards">
          <div class="card">
            <h3>Hai il pieno controllo della tua proprietà</h3>
            <p class="muted">
              Regole chiare, inventario e verbali: riduciamo rischi e contestazioni, con un processo trasparente.
            </p>
          </div>

          <div class="card">
            <h3>Immobile curato</h3>
            <p class="muted">
              Manutenzione ordinaria e ripristino quando necessario: la casa resta in ordine nel tempo.
            </p>
          </div>

          <div class="card">
            <h3>Zero gestione</h3>
            <p class="muted">
              Ci occupiamo di richieste, burocrazia, assistenza e attività operative.
            </p>
          </div>

          <div class="card">
            <h3>Impatto sociale positivo</h3>
            <p class="muted">
              Contribuisci ad alloggi accessibili per dipendenti pubblici, con regole chiare e permanenze più stabili.
            </p>
          </div>
        </div>

        <div class="cta-band">
          <div>
            <div class="cta-title">Vuoi capire se la tua casa è idonea?</div>
            <div class="cta-sub">Ti diciamo subito sì/no e perché, senza perdite di tempo.</div>
          </div>
          <div class="cta-actions">
            <button class="btn" type="button" data-open-modal="registerModal">Registrala ora</button>
            <a class="btn btn-ghost" href="/LandingPage/">Vedi la pagina completa</a>
          </div>
        </div>

        <footer class="footer">
          <div class="footer-left">
            <div class="footer-brand">Immobile Protetto</div>
            <div class="tiny">Provincia di Pescara • Abruzzo</div>
          </div>
          <div class="footer-right tiny">
            <a href="[LINK_PRIVACY]">Privacy</a>
            <span class="sep">•</span>
            <a href="mailto:[TUA_EMAIL]">[TUA_EMAIL]</a>
            <span class="sep">•</span>
            <a href="[INSERISCI_LINK_WHATSAPP]" rel="noopener">WhatsApp</a>
          </div>
        </footer>
      </div>
    </section>
  </main>

  <!-- MODAL: REGISTRA -->
  <div class="modal" id="registerModal" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Registrazione immobile">
    <div class="modal-backdrop" data-close-modal></div>

    <div class="modal-card" role="document">
      <div class="modal-head">
        <div>
          <div class="modal-title">Registra il tuo immobile</div>
          <div class="modal-sub">Compila in 2 minuti: ti ricontattiamo entro 24/48h.</div>
        </div>
        <button class="icon-btn" type="button" aria-label="Chiudi" data-close-modal>×</button>
      </div>

      <form id="leadForm" class="form" action="https://formspree.io/f/xjggypap" method="POST">
        <!-- honeypot anti-spam -->
        <input type="text" name="_gotcha" class="hp" tabindex="-1" autocomplete="off">

        <div class="grid">
          <label>Nome e Cognome
            <input name="name" autocomplete="name" required />
          </label>

          <label>Comune
            <input name="city" placeholder="Es. Pescara" required />
          </label>

          <label>Email
            <input type="email" name="email" autocomplete="email" placeholder="nome@email.it" required />
          </label>

          <label>Telefono / WhatsApp (opzionale)
            <input name="phone" inputmode="tel" autocomplete="tel" placeholder="+39 ..." />
          </label>

          <label>Tipologia immobile
            <select name="type" required>
              <option value="">Seleziona…</option>
              <option>Monolocale</option>
              <option>Bilocale</option>
              <option>Trilocale</option>
              <option>Stanza in appartamento</option>
            </select>
          </label>

          <label>Arredato?
            <select name="furnished" required>
              <option value="">Seleziona…</option>
              <option>Sì</option>
              <option>No</option>
              <option>Parzialmente</option>
            </select>
          </label>

          <label>Disponibilità
            <select name="availability" required>
              <option value="">Seleziona…</option>
              <option>Subito</option>
              <option>Entro 30 giorni</option>
              <option>Entro 60 giorni</option>
              <option>Oltre 60 giorni</option>
            </select>
          </label>

          <label>Stato immobile (indicativo)
            <select name="condition" required>
              <option value="">Seleziona…</option>
              <option>Ottimo / pronto</option>
              <option>Buono / piccoli interventi</option>
              <option>Da rivedere</option>
            </select>
          </label>
        </div>

        <label>Note (opzionale)
          <textarea name="notes" rows="3" placeholder="Es. zona, ascensore, posto auto, arredi, ecc."></textarea>
        </label>

        <label class="consent">
          <input type="checkbox" required />
          Acconsento a essere ricontattata e dichiaro di aver letto l’informativa privacy.
        </label>

        <button class="btn btn-full" type="submit">Invia richiesta</button>
        <p id="formStatus" class="form-status" role="status" aria-live="polite"></p>

        <div class="modal-foot tiny">
          Preferisci la pagina completa? <a href="/LandingPage/">Apri LandingPage</a>
        </div>
      </form>
    </div>
  </div>

  <script>
    // --- Video: rendilo "dolce" e non invasivo ---
    const bgVideo = document.getElementById('bgVideo');
    if (bgVideo) {
      const setRate = () => { bgVideo.playbackRate = 0.8; }; // 0.8x come richiesto
      bgVideo.addEventListener('loadedmetadata', setRate, { once: true });
      bgVideo.addEventListener('canplay', () => {
        // alcuni browser richiedono play() esplicito anche se muted
        bgVideo.play().catch(() => {});
      });

      // Risparmio risorse quando la tab non è visibile
      document.addEventListener('visibilitychange', () => {
        if (document.hidden) bgVideo.pause();
        else bgVideo.play().catch(() => {});
      });
    }

    // --- Burger menu mobile ---
    const burger = document.querySelector('.burger');
    const mobileNav = document.getElementById('mobileNav');
    if (burger && mobileNav) {
      burger.addEventListener('click', () => {
        const open = mobileNav.hasAttribute('hidden') === false;
        if (open) {
          mobileNav.setAttribute('hidden', '');
          burger.setAttribute('aria-expanded', 'false');
        } else {
          mobileNav.removeAttribute('hidden');
          burger.setAttribute('aria-expanded', 'true');
        }
      });

      mobileNav.querySelectorAll('a').forEach(a => {
        a.addEventListener('click', () => {
          mobileNav.setAttribute('hidden', '');
          burger.setAttribute('aria-expanded', 'false');
        });
      });
    }

    // --- Modal open/close (registrazione) ---
    const modal = document.getElementById('registerModal');
    const openers = document.querySelectorAll('[data-open-modal="registerModal"]');
    const closers = modal ? modal.querySelectorAll('[data-close-modal]') : [];

    function openModal() {
      if (!modal) return;
      modal.classList.add('open');
      modal.setAttribute('aria-hidden', 'false');
      // focus sul primo input
      const first = modal.querySelector('input[name="name"]');
      first && first.focus();
    }

    function closeModal() {
      if (!modal) return;
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden', 'true');
    }

    openers.forEach(btn => btn.addEventListener('click', openModal));
    closers.forEach(btn => btn.addEventListener('click', closeModal));

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && modal?.classList.contains('open')) closeModal();
    });

    // --- Formspree AJAX + messaggi ---
    const form = document.getElementById('leadForm');
    const statusEl = document.getElementById('formStatus');
    const submitBtn = form?.querySelector('button[type="submit"]');

    if (form && statusEl && submitBtn) {
      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        statusEl.className = 'form-status';
        statusEl.textContent = 'Invio in corso…';
        submitBtn.disabled = true;

        try {
          const formData = new FormData(form);
          const res = await fetch(form.action, {
            method: 'POST',
            body: formData,
            headers: { 'Accept': 'application/json' }
          });

          if (res.ok) {
            form.reset();
            statusEl.classList.add('ok');
            statusEl.textContent = 'Richiesta inviata. Ti contattiamo entro 24/48h.';
            // chiudi dopo un attimo
            setTimeout(() => closeModal(), 900);
          } else {
            const data = await res.json().catch(() => ({}));
            statusEl.classList.add('err');
            statusEl.textContent = data?.errors?.[0]?.message
              ? `Errore: ${data.errors[0].message}`
              : 'Errore nell’invio. Riprova o contattaci su WhatsApp.';
          }
        } catch (err) {
          statusEl.classList.add('err');
          statusEl.textContent = 'Connessione non riuscita. Riprova tra poco o contattaci su WhatsApp.';
        } finally {
          submitBtn.disabled = false;
        }
      });
    }
  </script>
</body>
</html>
